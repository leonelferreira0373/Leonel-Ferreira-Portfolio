<!doctype html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <link rel="stylesheet" href="style-sheet.css">
    <title>Admin Dashboard | Leonel Ferreira</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <style>
        /* Admin specific styles */
        .admin-section {
            padding: 40px;
            background: rgba(255, 255, 255, 0.05);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 20px;
            margin-bottom: 40px;
            backdrop-filter: blur(20px);
        }

        .admin-form-group {
            margin-bottom: 20px;
        }

        .admin-form-group label {
            display: block;
            color: var(--text-lighter);
            margin-bottom: 8px;
            font-weight: 500;
        }

        .admin-form-group input,
        .admin-form-group textarea {
            width: 100%;
            padding: 12px;
            background: rgba(0, 0, 0, 0.3);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 8px;
            color: #fff;
            font-family: inherit;
        }

        .admin-form-group textarea {
            min-height: 100px;
            resize: vertical;
        }

        .update-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 15px;
            background: rgba(255, 255, 255, 0.03);
            border: 1px solid rgba(255, 255, 255, 0.05);
            border-radius: 10px;
            margin-bottom: 10px;
        }

        .update-info h4 {
            color: #fff;
            margin-bottom: 5px;
        }

        .update-info span {
            color: var(--text-light);
            font-size: 0.9rem;
        }

        .action-btn {
            padding: 8px 12px;
            border-radius: 6px;
            border: none;
            cursor: pointer;
            margin-left: 10px;
            transition: all 0.2s;
        }

        .btn-edit {
            background: rgba(59, 130, 246, 0.2);
            color: #60a5fa;
        }

        .btn-delete {
            background: rgba(239, 68, 68, 0.2);
            color: #f87171;
        }

        .btn-edit:hover {
            background: rgba(59, 130, 246, 0.4);
        }

        .btn-delete:hover {
            background: rgba(239, 68, 68, 0.4);
        }

        .preview-area {
            margin-top: 10px;
            padding: 10px;
            background: rgba(0, 0, 0, 0.2);
            border-radius: 8px;
            font-size: 0.9rem;
            color: #aaa;
        }
    </style>
</head>

<body>
    <!-- Starfield Background -->
    <canvas id="starfield"></canvas>

    <nav id="glass-nav">
        <ul>
            <div class="pulse-layer"></div>
            <li><a href="index.html" class="back-arrow"><i class="fas fa-arrow-left"></i> Back to Site</a>
            </li>
            <li><a href="#" class="active">Admin Dashboard</a></li>
        </ul>
    </nav>

    <div class="scroll-track">
        <div class="scroll-button"></div>
    </div>

    <section class="section-container" style="padding-top: 150px;">
        <h1 class="section-title">Content Management</h1>

        <!-- LATEST UPDATES SECTION -->
        <div class="admin-section">
            <h2 style="color: #fff; margin-bottom: 20px; font-size: 1.5rem;">Latest Updates (Main Page)</h2>

            <div id="updateFormContainer"
                style="margin-bottom: 30px; padding-bottom: 30px; border-bottom: 1px solid rgba(255,255,255,0.1);">
                <h3 style="color: var(--accent-purple); margin-bottom: 15px;">Add / Edit Update</h3>
                <input type="hidden" id="updateId">

                <div class="admin-form-group">
                    <label>Title</label>
                    <input type="text" id="updateTitle" placeholder="Update Title">
                </div>
                <div class="admin-form-group">
                    <label>Date</label>
                    <input type="text" id="updateDate" placeholder="Nov 2026">
                </div>
                <!-- Optional Image Support -->
                <div class="admin-form-group">
                    <label>Image Path (Optional)</label>
                    <input type="text" id="updateImage" placeholder="IMG/project1.png">
                    <div class="preview-area">Note: Use local paths like 'IMG/filename.png'</div>
                </div>
                <div class="admin-form-group">
                    <label>Description</label>
                    <textarea id="updateDesc" placeholder="What's new?"></textarea>
                </div>

                <button onclick="saveUpdate()" class="cta-btn primary">Save Update</button>
                <button onclick="clearUpdateForm()" class="cta-btn secondary">Clear Form</button>
            </div>

            <h3 style="color: #fff; margin-bottom: 15px;">Existing Updates</h3>
            <div id="updatesList">
                <!-- Updates will be loaded here -->
            </div>
        </div>

        <!-- DISCOVER+ SECTION -->
        <div class="admin-section">
            <h2 style="color: #fff; margin-bottom: 20px; font-size: 1.5rem;">Discover+ Content</h2>

            <div class="admin-form-group">
                <label style="color: var(--accent-blue); font-size: 1.1rem;">My Story</label>
                <textarea id="storyContent" style="min-height: 200px;"></textarea>
            </div>

            <div class="admin-form-group">
                <label style="color: var(--accent-blue); font-size: 1.1rem;">Early Days</label>
                <textarea id="earlyDaysContent" style="min-height: 200px;"></textarea>
            </div>

            <div class="admin-form-group">
                <label style="color: var(--accent-blue); font-size: 1.1rem;">XXXTentacion Tribute</label>
                <textarea id="xxxContent" style="min-height: 150px;"></textarea>
            </div>

            <div class="admin-form-group">
                <label style="color: var(--accent-blue); font-size: 1.1rem;">Lil Wayne Tribute</label>
                <textarea id="wayneContent" style="min-height: 150px;"></textarea>
            </div>

            <button onclick="saveDiscoverContent()" class="cta-btn primary">Save All Discover+ Content</button>
        </div>

    </section>

    <footer id="glass-footer">
        <div class="footer-content">
            <div class="footer-section">
                <span class="footer-name">Admin Panel</span>
            </div>
        </div>
    </footer>

    <script>
        // ==========================================
        // DATA PERSISTENCE LOGIC
        // ==========================================

        // 1. UPDATES MANAGEMENT
        let updates = JSON.parse(localStorage.getItem('portfolio_updates')) || [];

        function renderUpdates() {
            const list = document.getElementById('updatesList');
            list.innerHTML = '';

            updates.forEach((update, index) => {
                const item = document.createElement('div');
                item.className = 'update-item';
                item.innerHTML = `
                    <div class="update-info">
                        <h4>${update.title}</h4>
                        <span>${update.date}</span>
                    </div>
                    <div>
                        <button onclick="editUpdate(${index})" class="action-btn btn-edit"><i class="fas fa-edit"></i></button>
                        <button onclick="deleteUpdate(${index})" class="action-btn btn-delete"><i class="fas fa-trash"></i></button>
                    </div>
                `;
                list.appendChild(item);
            });
        }

        function saveUpdate() {
            const id = document.getElementById('updateId').value;
            const title = document.getElementById('updateTitle').value;
            const date = document.getElementById('updateDate').value;
            const desc = document.getElementById('updateDesc').value;
            const img = document.getElementById('updateImage').value;

            if (!title || !desc) {
                alert('Title and Description are required!');
                return;
            }

            const updateData = { title, date, desc, img };

            if (id !== '') {
                // Edit existing
                updates[id] = updateData;
            } else {
                // Add new (to beginning)
                updates.unshift(updateData);
            }

            localStorage.setItem('portfolio_updates', JSON.stringify(updates));
            clearUpdateForm();
            renderUpdates();
            alert('Update Saved!');
        }

        function editUpdate(index) {
            const update = updates[index];
            document.getElementById('updateId').value = index;
            document.getElementById('updateTitle').value = update.title;
            document.getElementById('updateDate').value = update.date;
            document.getElementById('updateDesc').value = update.desc;
            document.getElementById('updateImage').value = update.img || '';
            document.getElementById('updateFormContainer').scrollIntoView({ behavior: 'smooth' });
        }

        function deleteUpdate(index) {
            if (confirm('Are you sure you want to delete this update?')) {
                updates.splice(index, 1);
                localStorage.setItem('portfolio_updates', JSON.stringify(updates));
                renderUpdates();
                // If we were editing this item, clear the form
                if (document.getElementById('updateId').value == index) {
                    clearUpdateForm();
                }
            }
        }

        function clearUpdateForm() {
            document.getElementById('updateId').value = '';
            document.getElementById('updateTitle').value = '';
            document.getElementById('updateDate').value = '';
            document.getElementById('updateDesc').value = '';
            document.getElementById('updateImage').value = '';
        }

        // 2. DISCOVER+ MANAGEMENT
        const discoverKeys = ['storyContent', 'earlyDaysContent', 'xxxContent', 'wayneContent'];

        function loadDiscoverContent() {
            const data = JSON.parse(localStorage.getItem('discover_content')) || {};
            discoverKeys.forEach(key => {
                if (document.getElementById(key)) {
                    document.getElementById(key).value = data[key] || '';
                }
            });
        }

        function saveDiscoverContent() {
            const data = {};
            discoverKeys.forEach(key => {
                const element = document.getElementById(key);
                if (element) {
                    data[key] = element.value;
                }
            });
            localStorage.setItem('discover_content', JSON.stringify(data));
            alert('Discover+ Content Saved!');
        }

        // INIT
        renderUpdates();
        loadDiscoverContent();


        // ==========================================
        // STARFIELD ANIMATION (Copied from main)
        // ==========================================
        const canvas = document.getElementById('starfield');
        const ctx = canvas.getContext('2d');

        function resizeCanvas() {
            canvas.width = window.innerWidth;
            canvas.height = window.innerHeight; // Fixed height for admin
        }
        resizeCanvas();
        window.addEventListener('resize', resizeCanvas);

        const stars = [];
        const starCount = 200;

        class Star {
            constructor() {
                this.reset();
                this.y = Math.random() * canvas.height;
            }
            reset() {
                this.x = Math.random() * canvas.width;
                this.y = Math.random() * canvas.height;
                this.size = Math.random() * 1.5 + 0.5;
                this.vx = 0;
                this.vy = 0;
            }
            update() {
                // Simple float
                this.y -= 0.2;
                if (this.y < 0) this.reset();
            }
            draw() {
                ctx.fillStyle = 'rgba(255, 255, 255, 0.4)'; // Dimmer for admin
                ctx.beginPath();
                ctx.arc(this.x, this.y, this.size, 0, Math.PI * 2);
                ctx.fill();
            }
        }

        for (let i = 0; i < starCount; i++) stars.push(new Star());

        function animate() {
            ctx.clearRect(0, 0, canvas.width, canvas.height);
            stars.forEach(star => {
                star.update();
                star.draw();
            });
            requestAnimationFrame(animate);
        }
        animate();

    </script>
</body>

</html>